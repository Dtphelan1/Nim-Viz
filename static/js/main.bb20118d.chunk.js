(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(77)},41:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),s=a(10),c=a(11),l=a(15),m=a(14),u=a(16),h=a(9),d=a(8),p=a(80),f=a(79);a(41);function b(e){return function(t){return r.a.createElement("div",{className:"route"},r.a.createElement(e,{location:t.location},t.children))}}var v=a(20),y=a(18);a(42);function E(e){return e.removed?r.a.createElement("div",{className:"match removed",alt:"One of the matches in this row was removed"}):r.a.createElement("img",{src:"matchstick-2.png",className:"match",alt:"One of the matches in this row"})}var g=a(22),w=a(24);a(48);function M(e){var t=e.incrementMatches,a=e.decrementMatches,n=e.currentMatch,i=e.minMatches,o=e.maxMatches,s=e.isRowLocked;return r.a.createElement("span",{className:"match-modifier-btns"},r.a.createElement("button",{className:"btn btn-primary btn-sm",disabled:o||s,onClick:function(){return t(n)}},r.a.createElement(g.a,{icon:w.b})),r.a.createElement("button",{className:"btn btn-primary btn-sm",disabled:i||s,onClick:function(){return a(n)}},r.a.createElement(g.a,{icon:w.a})))}a(49);var N=a(4),O=a.n(N);function k(e){var t=e.provisionalMatches,a=e.initialMatchesOnTurn,n=e.incrementMatches,i=e.decrementMatches,o=e.hasChangeOccurred;return r.a.createElement(r.a.Fragment,null,t.map(function(e,t){var s=e!==a[t],c=o&&!s;return r.a.createElement("div",{className:"match-row"+(s?" row-changed":""),key:t},r.a.createElement("span",{className:"matches-fixed-width-container"},O.a.times(e,function(e){return r.a.createElement(E,{key:e})}),O.a.times(a[t]-e,function(e){return r.a.createElement(E,{key:e,removed:!0})})),r.a.createElement(M,{currentMatch:t,maxMatches:e===a[t],minMatches:0===e,incrementMatches:n,decrementMatches:i,isRowLocked:c}))}))}function T(e){function t(t){var a,n=e.numberOfRows,r=t.toString(2),i=function(e){return Math.floor(Math.log2(2*e-1))+1}(n)-r.length;return a=t.toString(2),"0".repeat(i)+a}var a=e.provisionalMatches,n=e.initialMatchesOnTurn,i=e.incrementMatches,o=e.decrementMatches,s=e.hasChangeOccurred;return r.a.createElement("div",{id:"match-original-game-container"},a.map(function(e,a){var c=e!==n[a],l=s&&!c;return r.a.createElement("div",{className:"match-row"+(c?" row-changed":""),key:a},r.a.createElement("span",{className:"matches-fixed-width-container"},r.a.createElement("h1",{className:"float-right"},t(e))),r.a.createElement(M,{currentMatch:a,maxMatches:e===n[a],minMatches:0===e,incrementMatches:i,decrementMatches:o,isRowLocked:l}))}))}var x=function(){function e(){Object(s.a)(this,e),this.matchVizOptions=[{id:"original",display:"Matches Original",displaySmall:"Classic",visualizer:k},{id:"binary",display:"Binary Numbers",displaySmall:"Binary",visualizer:T}]}return Object(c.a)(e,[{key:"allVizualizerOptions",value:function(){return this.matchVizOptions}},{key:"initialVisualizer",value:function(){return this.matchVizOptions[0].visualizer}},{key:"getVisualizer",value:function(e){var t=this.matchVizOptions.find(function(t){return t.id===e});return O.a.isUndefined(t)?null:t.visualizer}}]),e}();a(51);function j(e){var t=e.restartGame,a=e.finalizeTurn,n=e.hasChangeOccurred,i=e.isFirstTurn,o=e.handleForceAIMoveButton;function s(e){e.preventDefault(),t()}function c(e){e.preventDefault(),a()}function l(e){e.preventDefault(),o()}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"turn-action-bar",className:"d-none d-sm-flex"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:l,disabled:!i},"AI Moves First"),r.a.createElement("button",{className:"btn btn-primary",onClick:s},"Restart Game"),r.a.createElement("button",{className:"btn btn-primary",disabled:!n,onClick:c},"Turn Finished")),r.a.createElement("div",{id:"turn-action-bar",className:"d-flex d-sm-none"},r.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary",onClick:l,disabled:!i},"AI First"),r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:s},"Restart"),r.a.createElement("button",{className:"btn btn-sm btn-primary",disabled:!n,onClick:c},"Finished")))}function R(e){var t=e.possibleModes,a=e.handleModeSelection;return r.a.createElement("div",{className:"d-flex justify-content-center",id:"mode-btns-container"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Mode Selection Menu"},t.map(function(e){return r.a.createElement("button",{type:"button",key:e.id,className:"btn btn-primary",onClick:function(){return a(e.id)}},e.displaySmall)})))}a(52);var A=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).incrementMatches=function(e){var t=a.state.initialMatchesOnTurn[e];if(!(a.state.provisionalMatches[e]+1>t)){var n=Object(y.a)(a.state.provisionalMatches);n[e]+=1,a.setState({provisionalMatches:n})}},a.decrementMatches=function(e){if(!(a.state.provisionalMatches[e]-1<0)){var t=Object(y.a)(a.state.provisionalMatches);t[e]-=1,a.setState({provisionalMatches:t})}},a.resetTurn=function(){a.setState({provisionalMatches:a.state.initialMatchesOnTurn})},a._AITurn=function(){var e=a.state.initialMatchesOnTurn,t=O.a.reduce(e,function(e,t){return t>1?e+1:e},0)<=1;if(console.log("isEndGame: ",t),t){var n=O.a.reduce(e,function(e,t){return t>0?e+1:e},0);console.log("remainingTurns: ",n);var r=O.a.max(e),i=e.indexOf(r),o=Object(y.a)(e),s=r-n%2;o[i]-=0===s?r:s,a.finalizeTurn(o)}else{var c=O.a.reduce(e,function(e,t){return t^e},0),l=a._getOptimalMoveBasedOnSum(c),m=Object(v.a)(l,2),u=m[0],h=m[1];if(-1===u){var d=O.a.reduce(e,function(e,t,a){return 0===t?e:(e.push(a),e)},[]),p=e[u=d[Math.floor(Math.random()*d.length)]];h=Math.floor(Math.random()*p)+1}var f=Object(y.a)(e);f[u]-=h,a.finalizeTurn(f)}},a.finalizeTurn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||a.state.provisionalMatches,n=a._nextPlayer();a.setState({initialMatchesOnTurn:t,provisionalMatches:t,isFirstTurn:!1,currentPlayer:n})},a.restartGame=function(){var e=a._initializeMatchesArray();a.setState({provisionalMatches:e,initialMatchesOnTurn:e,isFirstTurn:!0,currentPlayer:a.userGoesFirst?a.PLAYER_USER:a.PLAYER_AI})},a.handleForceAIMoveButton=function(){a.setState({currentPlayer:a.PLAYER_AI})},a.handleModeSelection=function(e){a.setState({currentMatchVisualizer:a.MatchVisualizerFactory.getVisualizer(e)})},a.PLAYER_USER=0,a.PLAYER_AI=1,a.numberOfRows=4,a.userGoesFirst=!0,a.MatchVisualizerFactory=new x;var n=a._initializeMatchesArray();return a.state={provisionalMatches:n,initialMatchesOnTurn:n,currentPlayer:a.PLAYER_USER,currentMatchVisualizer:a.MatchVisualizerFactory.initialVisualizer(),isFirstTurn:!0,winner:void 0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){if(0!==O.a.max(this.state.initialMatchesOnTurn)||this.state.winner)this.state.currentPlayer===this.PLAYER_AI&&this._AITurn();else{var n=this.state.currentPlayer===this.PLAYER_AI?"AI":"User";console.log("Congratulations on winning "+n+"!"),this.setState({winner:n})}}},{key:"_initializeMatchesArray",value:function(){for(var e=[],t=0;t<this.numberOfRows;t++)e.push(1+2*t);return e}},{key:"_nextPlayer",value:function(){switch(this.state.currentPlayer){case this.PLAYER_AI:return this.PLAYER_USER;case this.PLAYER_USER:return this.PLAYER_AI;default:return console.error("Switching current player but the turn-switch mechanic is undefined for this player ".concat(this.state.currentPlayer)),null}}},{key:"_getOptimalMoveBasedOnSum",value:function(e){var t=-1,a=0;return this.state.provisionalMatches.forEach(function(n,r){-1===t&&(n^e)<n&&(t=r,a=n-(n^e))}),[t,a]}},{key:"render",value:function(){var e=!O.a.isEqual(this.state.provisionalMatches,this.state.initialMatchesOnTurn),t=this.state.currentMatchVisualizer;return this.state.winner?r.a.createElement(h.a,{push:!0,to:{pathname:"/gameover",search:"?winner="+this.state.winner}}):r.a.createElement("div",{id:"match-game-container",className:"jumbotron"},r.a.createElement(R,{possibleModes:this.MatchVisualizerFactory.allVizualizerOptions(),handleModeSelection:this.handleModeSelection}),r.a.createElement("div",{id:"match-game-visualization",className:"d-flex align-items-center"},r.a.createElement("div",{className:"w-100"},t&&r.a.createElement(t,{provisionalMatches:this.state.provisionalMatches,initialMatchesOnTurn:this.state.initialMatchesOnTurn,incrementMatches:this.incrementMatches,decrementMatches:this.decrementMatches,hasChangeOccurred:e,numberOfRows:this.numberOfRows}))),r.a.createElement(j,{isFirstTurn:this.state.isFirstTurn,restartGame:this.restartGame,resetTurn:this.resetTurn,finalizeTurn:this.finalizeTurn,handleForceAIMoveButton:this.handleForceAIMoveButton,hasChangeOccurred:e}))}}]),t}(n.Component),S=a(32),z=a.n(S);function F(e){var t=e.pathname,a=e.displayText;return r.a.createElement(d.b,{to:t},r.a.createElement("button",{className:"btn btn-lg btn-primary"},a))}function P(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h1",{className:"display-3 "},"Congrats"),r.a.createElement("h1",{className:"display-4 mb-5"},"You beat the AI!")),r.a.createElement("div",{className:"d-flex justify-content-around m-5",id:"nav-btns"},r.a.createElement(F,{pathname:"/",displayText:"Back Home"}),r.a.createElement(F,{pathname:"/play",displayText:"Play Again"})))}function C(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h1",{className:"display-3 "},"Whoops"),r.a.createElement("h1",{className:"display-4 mb-5"},"Better luck next time")),r.a.createElement("div",{className:"d-flex justify-content-around m-5",id:"nav-btns"},r.a.createElement(F,{pathname:"/",displayText:"Back Home"}),r.a.createElement(F,{pathname:"/play",displayText:"Play Again"})))}function I(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h1",{className:"display-3 "},"Sorry"),r.a.createElement("h1",{className:"display-4 mb-5"},"That's not a valid page...")),r.a.createElement("div",{className:"d-flex justify-content-around m-5",id:"nav-btns"},r.a.createElement(F,{pathname:"/",displayText:"Home"}),r.a.createElement(F,{pathname:"/play",displayText:"Play Nim"})))}function _(e){var t,a=z.a.parse(e.location.search);return t="AI"===a.winner?C:"User"===a.winner?P:I,r.a.createElement(t,null)}a(70);function B(){return r.a.createElement("section",{id:"title-page"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"display-3 text-center"},"Digital Nim"),r.a.createElement("h2",{className:"display-4 text-center"},"An Old Parlor Game Brought to the Web")),r.a.createElement("div",{id:"title-buttons"},r.a.createElement(F,{pathname:"/learn",displayText:"About Nim"}),r.a.createElement(F,{pathname:"/play",displayText:"Start Playing"})))}function V(e){return r.a.createElement("div",{className:"container jumbotron"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"About Nim"))),r.a.createElement("div",{className:"row p-2 align-items-center"},r.a.createElement("div",{className:"col-md-4 p-2 text-center"},r.a.createElement("img",{src:"nimrod.png",alt:"",style:{objectFit:"cover",height:"auto",maxWidth:"200px"}})),r.a.createElement("div",{className:"col-md-8 p-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Nim")," is a ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Mathematical_game"},"mathematical game"),", specifically a ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Game_of_strategy"},"game of strategy")," in which two players take turns removing objects from distinct heaps or piles. On each turn, a player must remove at least one object, and may remove any number of objects provided they all come from the same heap/row. References to Nim date back to the 16th century, but it wasn't until 1901 that Charles Bouton deconstructing the optimal strategy of the game. Depending on the version being played, the goal of the game is either to avoid taking the last object, or to take the last object. This website uses the typical gameplay format - ",r.a.createElement("em",null,"mis\xe8re")," - in which the player to take the last object loses."))),r.a.createElement("div",{className:"row p-2 align-items-center"},r.a.createElement("div",{className:"col-md-4 order-0 order-md-2 p-2 text-center"},r.a.createElement("img",{src:"nim-setup.png",alt:"Visual pyramid of nim play pieces, matchsticks arranged in rows of 1, 3, 5, and 7.",style:{objectFit:"cover",height:"auto",maxWidth:"200px"}})),r.a.createElement("div",{className:"col-md-8 order-1 col-pull-md-8 p-2"},r.a.createElement("span",null,"Here you'll see the typical set up for a round of Nim. Rows of matches are set up on top of one another, each row adding two to the previous. The game starts by removing some number of matches from a single row. To win, you want to trap your opponent into taking the last piece. Think you're ready to jump right in? Click the play button to start. If you're interested in reading a bit more first, check out the winning strategy page!"))),r.a.createElement("div",{className:"row p-5 justify-content-around"},r.a.createElement(F,{pathname:"/play",displayText:"Play Now"}),r.a.createElement(F,{pathname:"/winning",displayText:"Learn More"})))}function L(e){var t=Object(n.useState)(!1),a=Object(v.a)(t,2),i=a[0],o=a[1];return r.a.createElement("div",{className:"container jumbotron"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Winning At Nim"))),r.a.createElement("div",{className:"row p-2 align-items-center"},r.a.createElement("div",{className:"col-12 p-2"},r.a.createElement("p",null,'The secret to winning Nim is pretty straightforward: to win, must always take as many matchsticks as possible so that the \u201cNim Sum\u201d of the rows is zero. The complicated part can be understanding what "Nim Sum" means.'),r.a.createElement("p",null,'A Nim Sum is the "Exclusive Or", XOR for short, of all the numbers of matches together. For those who aren\'t familar with XOR, think of it as the "or" you\'re thinking of when speaking conversational english. When someone asks you if you want a water or a soda with your order they usually mean - "Hey, you can have either a water, or a soda. Which of the two would you like?". That\'s what Excluive Or means - one or the other, but not both.'),r.a.createElement("p",null,"XOR rears it's head in everything from philosophy, electrical engineering, computer science and matchstick parlor games. Since XOR is a decision between two things we need to convert the number of matches in each row into ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Binary_number"},"binary"),". Instead of using the digits 0-9 to represent numbers, we just use 0 and 1. Similarly instead of a Ten's place and a Hundred's place, we have a Two's place, a Four's place, an Eight's place and so on. When we XOR two numbers, we're looking at each column's place for both numbers - the One's, Twos', Four's, Eight's -  and asking: for this column, is there only a single 1? If so, we put a 1 as our result. Otherwise, we put a 0."),r.a.createElement("p",null,"When calculating the Nim Sum of the current game, we XOR ",r.a.createElement("i",null,"all of our rows of matches"),". But XOR only takes numbers at a time - how can we XOR all our rows together? All we do is take the result of that first XOR, and use that as one of othe numbers in our next XOR. So if we wanted to XOR 7, 2 and 3 together - 111, 010 and 011 - we'd XOR 111 and 010 first, which yields 101, or 5. Then we'd XOR 101 with 011, producing 110, or 6. A heuristic for quickly doing this over multiple rows is to, for each column, see if there are an even or odd number of 1's. If it's even, ultimate value for that column will be 0. If odd, it will be 1."),r.a.createElement("p",null,"Now that we understand XOR and how to caluclate a Nim Sum for a given list of numbers, let's think about the winning strategy is again. Our goal is that, at the end of our turn, the Nim Sum should be zero. To do so, we can remove matches from some row equal to the current Nim Sum. So using XOR to combine all our rows into a single value, that value is how many matches we need to remove in order to beat our opponent."),r.a.createElement("p",null,"With this, you should be able to win the game if you're ready. But there is one more important piece of information that you might need... You should ",r.a.createElement("a",{href:"/play"},"try to play first")," and see if you can figure out what it is. If you're still in need of a bit more help, click here for more."),r.a.createElement("p",{className:i?"d-none":"",onClick:function(){return o(!i)},style:{cursor:"pointer"}},r.a.createElement("i",null,"Click here if you're ready to see the final piece of information")),r.a.createElement("p",{className:i?"":"d-none"},"The final piece of vital information, which you hopefully discerned after trying to beat the AI: The person ",r.a.createElement("b",null,"who goes first cannot win unless their opponent")," messes up the optimal strategy. While this happens often when you're in an 17th/18th century French parlor playing with drunk aristocrats, it's pretty uncommon when you're playing against a computerized algorithm. Go ahead, let the AI to go first, and see how that changes things. Remember, you want ",r.a.createElement("i",null,"the opponent")," to be the ",r.a.createElement("i",null,"last")," person to take a match."))))}a(71);function X(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-light navbar-expand-md mb-2"},r.a.createElement(d.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:"matchstick-2.png",m:!0,alt:"subtle matchstick logo to accompany brand name",className:"pl-1 pr-1",style:{height:"30px"}}),"Digital Nim"),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{class:"navbar-nav mr-auto"},r.a.createElement("li",{class:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/play"},"Play")),r.a.createElement("li",{class:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/learn"},"About Nim")),r.a.createElement("li",{class:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/winning"},"How to Win"))))))}var W=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(n.Component),Y=Object(h.g)(W),G=(a(72),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).routerRender=function(e){var t=e.location,a=b(B),n=b(_),i=b(V),o=b(L),s=b(A),c=b(I);return r.a.createElement(p.a,null,r.a.createElement(f.a,{key:t.key,timeout:1e3},r.a.createElement(h.d,{location:t},r.a.createElement(h.b,{exact:!0,path:"/",component:a}),r.a.createElement(h.b,{path:"/learn",component:i}),r.a.createElement(h.b,{path:"/winning",component:o}),r.a.createElement(h.b,{path:"/play",component:s}),r.a.createElement(h.b,{path:"/gameover",component:n}),r.a.createElement(h.b,{component:c}))))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{basename:"/nim-viz"},r.a.createElement(Y,null,r.a.createElement(X,null),r.a.createElement(h.b,{render:this.routerRender})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(75),a(76);o.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.bb20118d.chunk.js.map